<table class="table table-bordered">
    <thead>
        <tr>
            <th>ID</th>
            <th>Proyect</th>
            <th>Connection</th>
            <th>Name</th>
            <th>Queries</th>
            <th>Unique Keys</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for row in queries %}
        <tr class="{% if not row.active %}inactive{% endif %}">
            <td>{{ row.id }}</td>
            <td>{{ row.proyect_name }}</td>
            <td>{{ row.connection_name }}</td>
            <td>{{ row.name }}</td>
            <td style="white-space: pre-wrap; word-break: break-word; min-width: 450px;">{{ row.queries }}</td>



            <td style="min-width: 250px;">{{ row.unique_keys }}</td>
            <td style="width: 400px; text-decoration: none;">
                <form method="post" action="/restart/{{ row.id }}" style="display:inline;">
                    <button type="submit" class="btn btn-warning btn-sm" {% if not row.active %}disabled{% endif %}>Restart</button>
                </form>
                <button type="button" class="btn btn-primary btn-sm" onclick="document.getElementById('edit-form-{{ row.id }}').style.display='block'" {% if not row.active %}disabled{% endif %}>Edit</button>
                <form method="post" action="/delete_query/{{ row.id }}" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this record?');">
                    <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                </form>
                <form method="post" action="/toggle_active/{{ row.id }}" style="display:inline;">
                    <button type="submit" class="btn btn-sm {{ 'btn-success' if row.active else 'btn-secondary' }}">
                        {{ 'Deactivate' if row.active else 'Activate' }}
                    </button>
                </form>
                <form id="edit-form-{{ row.id }}" method="post" action="/edit_query/{{ row.id }}" style="display:none; margin-top:10px;">
                    <div class="form-group">
                        <label>Query new LSN</label>
                        <input type="text" name="query_new_lsn" class="form-control" value="{{ row.query_new_lsn }}">
                    </div>
                    <div class="form-group">
                        <label>Query read full table</label>
                        <input type="text" name="query_full" class="form-control" value="{{ row.query_full }}">
                    </div>
                    <div class="form-group">
                        <label>Query get changes</label>
                        <input type="text" name="query_incremental" class="form-control" value="{{ row.query_incremental }}">
                    </div>
                    <div class="form-group">
                        <label>Unique Keys</label>
                        <input type="text" name="unique_keys" class="form-control" value="{{ row.unique_keys }}">
                    </div>
                    <button type="submit" class="btn btn-success btn-sm">Save</button>
                    <button type="button" class="btn btn-secondary btn-sm" onclick="document.getElementById('edit-form-{{ row.id }}').style.display='none'">Cancel</button>
                </form>                
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
